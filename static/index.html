<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>jabbakam</title>
<link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;base64, AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAD////////////+/v7a2tpxcXEzMzMeHh4lJSVSUlKsrKz4+Pj+/v7+/v7+/v7////+/v7+/v7+/v6+vr4ZGRkAAAABAQEBAQEBAQEBAQECAgJpaWn39/f+/v7+/v7////+/v7+/v7x8fE4ODgBAQEBAQEKCgotLS0TExMBAQEAAAAFBQWenp7+/v7+/v7////+/v7+/v7KysoLCwsBAQEFBQWXl5ft7e3BwcEVFRUBAQEAAABKSkr+/v7+/v7////9/f3+/v69vb0BAQEBAQELCwvi4uL+/v7+/v5PT08AAAAAAAAoKCjw8PD+/v7////+/v7+/v7a2toaGhoBAQEgICD39/f+/v7+/v5eXl4BAQEBAQEnJyfu7u7////////+/v7+/v7+/v62trZ9fX3CwsL+/v7+/v7///9eXl4BAQEBAQEnJyfu7u7////////+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///9eXl4BAQEBAQEnJyfu7u7////////+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///9eXl4BAQEBAQEnJyfu7u7///////////////////////////////////////////9eXl4BAQEBAQEnJyfu7u7///////////////////////////////////////////9eXl4BAQEBAQEnJyfu7u7///////////////////////////////////////////9eXl4BAQEBAQEnJyfu7u7////////////////////////////////////9/v7+/f5fX14TDQccEwspKCjt7e7+/v7////////////////////////////////9/v38/v1oY2CYYzyqcD9PQDXt7e79/v7////////////////////////////////9/v78/f10dG6lbTyxdUJXRzry8fL+/v3////////////////////////////////9/v7+/v3P0NBIPzhBNiuYmZj+/f3+/v7///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />
<style>
body {
  margin: 4px;
  background-color: #e0e0e0;
}
body,p,a,td,th,div,h1,h2,h3 {
  font-family: "verdana";
  font-size: 9pt;
}
table {
  border-right: 1px solid #d0d0d0;
  border-top: 1px solid #d0d0d0;
}
th {
  font-weight: bold;
  border-left: 1px solid #d0d0d0;
  border-bottom: 2px solid #b0b0b0;
  padding-left: 3px;
  padding-right: 3px;
  background-color: #f0f0f0;
  padding-bottom: 5px;
  margin: 0px;
}
td {
  padding: 2px;
  border-left: 1px solid #d0d0d0;
  border-bottom: 1px solid #d0d0d0;
  margin: 0px;
  text-align: right;
}
div#container {

}
div#first {
  background-color: #ffffff;
  padding: 4px;
  border: 4px solid #0099cc;
  float: left;
}
</style>
<script type="text/javascript" src="chartx.js"></script>
<script type="text/javascript">
var qchart;
function loadPage() {
  qchart = new ChartX("cx_session", {
    width: 640,
    height: 480,
    bufferfactor: 3,
    title: "quotes",
    legend: true,
    container: "charts",
    bgcolor: "black",
    linewidth: 1,
    series: [
      {
        name: "wti",
        color: "#cc3300",
        type: "line",
        yscale: 120,
        cross: -60
      },
      {
        name: "brent",
        color: "#33cc33",
        type: "line",
        yscale: 120,
        cross: -60
      }
    ]
  });
  initSocket();
}
function initSocket() {
  var container = document.getElementById("container");
  var quoteSocket;
  quoteSocket = new WebSocket("ws://" + window.location.host + "/quotes");
  quoteSocket.onopen = function(event){
    quoteSocket.onmessage = function(event){
      var quote = JSON.parse(event.data);
      qchart.draw({
        wti: quote[2],
        brent: quote[3]
      });
    };
  };
  quoteSocket.onerror = function(err) {
    console.error(err);
  };
  quoteSocket.onclose = function() {
    setTimeout(initSocket, 3000);
  };
};
</script>
</head>
<body onload="loadPage()" leftmargin="0" topmargin="0" marginwidth="0">
<div id="first">
<div id="container">
</div>
<div id="charts">
</div>
</div>
</body>
</html>
